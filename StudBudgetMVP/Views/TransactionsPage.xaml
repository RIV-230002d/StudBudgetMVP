<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="StudBudgetMVP.Views.TransactionsPage"
             Title="Транзакции">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <!-- категория -->
            <Picker Title="Категория"
                    ItemsSource="{Binding Categories}"
                    ItemDisplayBinding="{Binding Name}"
                    SelectedItem="{Binding SelectedCategory}" />

            <!-- сумма: руб + коп -->
            <HorizontalStackLayout Spacing="5">
                <Entry Placeholder="руб"
                       WidthRequest="120"
                       Keyboard="Numeric"
                       Text="{Binding Rubles}" />

                <Label Text="." VerticalOptions="Center"/>

                <Entry Placeholder="коп"
                       WidthRequest="60"
                       Keyboard="Numeric"
                       MaxLength="2"
                       Text="{Binding Kopeks}" />
            </HorizontalStackLayout>

            <!-- кнопки -->
            <Button Text="Добавить" Command="{Binding AddCommand}" />
            <Button Text="Удалить выбранную"
                    Command="{Binding DeleteCommand}" />

            <!-- список транзакций -->
            <CollectionView ItemsSource="{Binding Transactions}"
                            SelectionMode="Single"
                            SelectedItem="{Binding SelectedTransaction}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10" Margin="0,5">
                            <VerticalStackLayout>
                                <Label Text="{Binding Date, StringFormat='{}{0:dd.MM.yyyy HH:mm}'}"
                                       FontAttributes="Bold" />
                                <Label Text="{Binding Amount, StringFormat='{}{0:C}'}" />
                                <Label Text="{Binding CategoryName}" TextColor="Gray"/>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>